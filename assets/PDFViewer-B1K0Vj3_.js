import{d as e,J as o,c as t,e as r,v as l,f as n,a as s,u as a,t as i,g as c,i as d}from"./vendor-D-LqOmN5.js";import{u}from"./color-CasIMLYm.js";import{a as m}from"./index-ncT7nSB4.js";import"./vendor-toast-INF7ryvu.js";const p={class:"pdf-viewer-container"},v={class:"text-xl font-bold"},w={class:"flex items-center gap-4"},h={class:"zoom-controls flex items-center gap-2"},f={class:"zoom-level"},k={xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},g={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5v-4m0 4h-4m4 0l-5-5"},x={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},b=["href"],y={key:0,class:"pdf-wrapper"},C=["src"],M={key:1,class:"pdf-fallback"},j={class:"pdf-error-message"},B={class:"flex justify-center gap-4"},F=["href"],L=["href"],V=m(e({__name:"PDFViewer",props:{isOpen:{type:Boolean,default:!1},title:{type:String,default:"CV Preview"},pdfUrl:{type:String,required:!0}},emits:["close"],setup(e,{emit:m}){const V=u(),_=o(1),z=o(null),O=o(null),U=o(!1),E=o(!1),H=m,closeModal=()=>{H("close")},zoomIn=()=>{_.value<4&&(_.value+=.25)},zoomOut=()=>{_.value>.5&&(_.value-=.25)},toggleFullScreen=()=>{document.fullscreenElement?document.exitFullscreen&&(document.exitFullscreen(),U.value=!1):O.value?.requestFullscreen&&(O.value?.requestFullscreen(),U.value=!0)},handleIframeLoad=e=>{try{const o=e.target,t=o.contentDocument||o.contentWindow?.document;t?.title.includes("404")||t?.body.textContent?.includes("404 Not Found")?E.value=!0:E.value=!1}catch(o){E.value=!1}},handleIframeError=()=>{E.value=!0};return document.addEventListener("fullscreenchange",()=>{U.value=!!document.fullscreenElement}),(o,u)=>e.isOpen?(l(),t("div",{key:0,class:"pdf-viewer-modal",onClick:d(closeModal,["self"])},[n("div",p,[n("div",{class:"pdf-viewer-header",style:s({"background-color":a(V).currentColor.primary})},[n("h3",v,i(e.title),1),n("div",w,[n("div",h,[n("button",{class:"zoom-button",onClick:zoomOut,title:"Zoom out"},u[0]||(u[0]=[n("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 12H4"})],-1)])),n("span",f,i(Math.round(100*_.value))+"%",1),n("button",{class:"zoom-button",onClick:zoomIn,title:"Zoom in"},u[1]||(u[1]=[n("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)]))]),n("button",{class:"zoom-button",onClick:toggleFullScreen,title:"Fullscreen"},[(l(),t("svg",k,[U.value?(l(),t("path",x)):(l(),t("path",g))]))]),n("a",{href:e.pdfUrl,target:"_blank",class:"download-button flex items-center gap-1 px-2 py-1 rounded-md bg-white/20 hover:bg-white/30 transition-colors",title:"Open in new tab"},u[2]||(u[2]=[n("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})],-1),n("span",{class:"text-sm"},"Open",-1)]),8,b),n("button",{class:"close-button",onClick:closeModal},u[3]||(u[3]=[n("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])],4),n("div",{class:"pdf-viewer-content",ref_key:"pdfContainer",ref:z},[E.value?(l(),t("div",M,[n("div",j,[u[6]||(u[6]=n("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16 mb-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)),u[7]||(u[7]=n("h3",{class:"text-xl font-bold mb-2"},"PDF không thể hiển thị trực tiếp",-1)),u[8]||(u[8]=n("p",{class:"mb-4"},"Vui lòng sử dụng nút tải CV hoặc mở trong tab mới",-1)),n("div",B,[n("a",{href:e.pdfUrl,download:"",class:"inline-flex items-center px-4 py-2 rounded-md",style:s({"background-color":a(V).currentColor.primary,color:"white"})},u[4]||(u[4]=[n("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),c(" Tải CV ")]),12,F),n("a",{href:e.pdfUrl,target:"_blank",class:"inline-flex items-center px-4 py-2 border-2 rounded-md",style:s({"border-color":a(V).currentColor.primary,color:a(V).currentColor.primary})},u[5]||(u[5]=[n("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})],-1),c(" Mở trong tab mới ")]),12,L)])])])):(l(),t("div",y,[n("iframe",{ref_key:"pdfFrame",ref:O,src:e.pdfUrl,frameborder:"0",style:s({transform:`scale(${_.value})`,transformOrigin:"top center"}),allow:"fullscreen",onLoad:handleIframeLoad,onError:handleIframeError},null,44,C)]))],512)])])):r("",!0)}}),[["__scopeId","data-v-90c7fd59"]]);export{V as default};
